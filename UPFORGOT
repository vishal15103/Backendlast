import React, { useState } from "react";

import { useNavigate } from "react-router-dom";

import axios from "axios";



function ForgotPasswordPage() {

  const [userId, setUserId] = useState("");

  const [newPassword, setNewPassword] = useState("");

  const [confirmPassword, setConfirmPassword] = useState("");

  const navigate = useNavigate();



  const handleReset = async (e) => {

    e.preventDefault();



    if (newPassword !== confirmPassword) {

      alert("Passwords do not match.");

      return;

    }



    try {

      await axios.post("http://localhost:8080/api/auth/forgot-password", {

        userId,

        newPassword,

      });

      alert("Password reset successful! You can now login.");

      navigate("/");

    } catch (err) {

      alert("Failed to reset password.");

    }

  };



  return (

    <div className="forgot-password-container">

      <h2>Reset Your Password</h2>

      <form onSubmit={handleReset}>

        <input

          type="text"

          placeholder="Enter User ID"

          value={userId}

          onChange={(e) => setUserId(e.target.value)}

          required

        />

        <input

          type="password"

          placeholder="Enter New Password"

          value={newPassword}

          onChange={(e) => setNewPassword(e.target.value)}

          required

        />

        <input

          type="password"

          placeholder="Confirm New Password"

          value={confirmPassword}

          onChange={(e) => setConfirmPassword(e.target.value)}

          required

        />

        <button type="submit" className="reset-btn">

          Reset Password

        </button>

      </form>

      <p>

        <a onClick={() => navigate("/")} className="link-btn">

          Back to Login

        </a>

      </p>

    </div>

  );

}



export default ForgotPasswordPage;
