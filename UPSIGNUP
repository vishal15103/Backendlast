import React, { useState, useEffect } from "react";

import { FaEye, FaEyeSlash } from "react-icons/fa";

import axios from "axios";

import "./LoginPage.css";

import "../App.css";



function SignUpPage() {

  const [backgroundIndex, setBackgroundIndex] = useState(0);

  const [passwordVisible, setPasswordVisible] = useState(false);

  const [confirmPasswordVisible, setConfirmPasswordVisible] = useState(false);

  const [userId, setUserId] = useState("");

  const [password, setPassword] = useState("");



  const backgrounds = [

    "/images/bg_1.jpeg",

    "/images/bg2.jpeg",

    "/images/bg3.jpeg",

    "/images/bg_4.jpeg",

  ];



  useEffect(() => {

    const interval = setInterval(() => {

      setBackgroundIndex((prev) => (prev + 1) % backgrounds.length);

    }, 4000);

    return () => clearInterval(interval);

  }, [backgrounds.length]);



  const handleSignUp = async (e) => {

    e.preventDefault();

    try {

      await axios.post("http://localhost:8080/api/auth/signup", {

        userId,

        password,

      });

      alert("Signup successful! You can login now.");

    } catch (err) {

      alert("Signup failed. Try again.");

    }

  };



  return (

    <div

      className="login-container"

      style={{ backgroundImage: `url(${backgrounds[backgroundIndex]})` }}

    >

      <header className="header">

        <div className="logo">Standard Chartered</div>

      </header>



      <div className="main-content" style={{ justifyContent: "center" }}>

        <div className="login-box">

          <h2>User Sign Up</h2>

          <form onSubmit={handleSignUp}>

            <input

              type="text"

              placeholder="User ID"

              value={userId}

              onChange={(e) => setUserId(e.target.value)}

              required

            />



            <div className="password-container">

              <input

                type={passwordVisible ? "text" : "password"}

                placeholder="New Password"

                value={password}

                onChange={(e) => setPassword(e.target.value)}

                required

              />

              <span

                className="toggle-password"

                onClick={() => setPasswordVisible(!passwordVisible)}

              >

                {passwordVisible ? <FaEyeSlash /> : <FaEye />}

              </span>

            </div>



            <div className="password-container">

              <input

                type={confirmPasswordVisible ? "text" : "password"}

                placeholder="Confirm Password"

                required

              />

              <span

                className="toggle-password"

                onClick={() =>

                  setConfirmPasswordVisible(!confirmPasswordVisible)

                }

              >

                {confirmPasswordVisible ? <FaEyeSlash /> : <FaEye />}

              </span>

            </div>



            <button className="login-btn" type="submit">

              Sign Up

            </button>

          </form>

        </div>

      </div>

    </div>

  );

}



export default SignUpPage;
